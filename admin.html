<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ê–¥–º–∏–Ω–∫–∞ ‚Äî VAY MESSAGE</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <nav>
    <b>VAY MESSAGE ‚Ä¢ ADMIN</b>
    <div>
      <a href="index.html">–°–∞–π—Ç</a>
      <a href="notifications.html">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</a>
      <a href="#" onclick="logout()">–í—ã–π—Ç–∏</a>
    </div>
  </nav>
</header>

<section class="hero reveal">
  <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
  <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏</p>
</section>

<!-- üîê –ü–†–û–í–ï–†–ö–ê –í–•–û–î–ê -->
<script>
if (localStorage.getItem("vay_admin") !== "true") {
  location.href = "login.html";
}
</script>

<!-- üì¢ –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
<section class="glass reveal">
  <h2>üì¢ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h2>

  <input id="nTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
  <br><br>
  <textarea id="nText" placeholder="–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"></textarea>
  <br><br>

  <button onclick="sendNotify()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –õ–ö</button>
  <button onclick="pushTest()">Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
</section>

<!-- üì∞ –û–ë–ù–û–í–õ–ï–ù–ò–Ø -->
<section class="glass reveal">
  <h2>üì∞ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è (updates.json)</h2>

  <input id="uVersion" placeholder="–í–µ—Ä—Å–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä v1.2)">
  <br><br>
  <input id="uDate" placeholder="–î–∞—Ç–∞">
  <br><br>
  <textarea id="uText" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"></textarea>
  <br><br>

  <button onclick="addUpdate()">–î–æ–±–∞–≤–∏—Ç—å (–ª–æ–∫–∞–ª—å–Ω–æ)</button>
</section>

<!-- ‚öôÔ∏è PUSH -->
<section class="glass reveal">
  <h2>üîî Push —Å–∏—Å—Ç–µ–º–∞</h2>
  <button onclick="enablePush()">–í–∫–ª—é—á–∏—Ç—å push</button>
</section>

<script>
/* üö™ –í–´–•–û–î */
function logout() {
  localStorage.removeItem("vay_admin");
  location.href = "index.html";
}

/* üì¢ –õ–û–ö–ê–õ–¨–ù–´–ï –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø */
function sendNotify() {
  let list = JSON.parse(localStorage.getItem("vay_notifications")) || [];

  list.push({
    title: document.getElementById("nTitle").value,
    text: document.getElementById("nText").value,
    time: new Date().toLocaleString(),
    read: false
  });

  localStorage.setItem("vay_notifications", JSON.stringify(list));
  alert("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ‚úÖ");
}

/* üîî PUSH (SERVICE WORKER) */
async function enablePush() {
  if (!("serviceWorker" in navigator)) {
    alert("Push –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");
    return;
  }

  await navigator.serviceWorker.register("/sw.js");
  const perm = await Notification.requestPermission();

  if (perm === "granted") {
    alert("Push –≤–∫–ª—é—á—ë–Ω üîî");
  } else {
    alert("–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ");
  }
}

/* üß™ –¢–ï–°–¢ PUSH */
function pushTest() {
  navigator.serviceWorker.ready.then(reg => {
    reg.showNotification("VAY MESSAGE", {
      body: "–¢–µ—Å—Ç–æ–≤–æ–µ push –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ üîî",
      icon: "icon.png",
      badge: "badge.png"
    });
  });
}

/* üì∞ –û–ë–ù–û–í–õ–ï–ù–ò–Ø (DEMO) */
function addUpdate() {
  alert(
    "‚ö†Ô∏è GitHub Pages –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å JSON.\n\n" +
    "–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ OVH —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏."
  );
}
</script>

</body>
</html>
...
<script src="main.js"></script>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/sw.js");
}
</script>
</body>
</html>
